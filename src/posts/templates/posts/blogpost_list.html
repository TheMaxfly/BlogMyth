{% extends 'base.html' %}

{% block title %}
    <title>MytheBlog - Acceuil</title>
{% endblock %}

{% block content %}
    <h1>Le Blog des Mythes et Légendes</h1>
    {% for post in posts %}
        <article>
            <h2>{{ post.title }}</h2>


            <div>
                {% if request.user.is_authenticated %}
                    <a href="{% url 'posts:update' post.slug %}">Modifier</a>
                    <a href="{% url 'posts:delete' post.slug %}">Supprimer</a>
                {% endif %} 
            </div>
            
            {% with post.created_at|date:'j F Y' as creation_date %}
                <h5>
                    Publié par
                    <i>
                        {% if post.author %}
                            {{ post.author.username }}
                        {% else %}
                            anonyme
                        {% endif %}
                    </i>
                    {% if creation_date %}
                        le {{ creation_date }}
                    {% else %}
                        - date non renseignée -
                    {% endif %}
                </h5>
            {% endwith %}
            <p>{{ post.content|safe|truncatewords:50 }}</p>
            
        </article>
    {% endfor %}

{% endblock %}
